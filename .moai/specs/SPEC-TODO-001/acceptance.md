# SPEC-TODO-001 인수 기준

---
spec_id: SPEC-TODO-001
version: 1.0.0
created: 2026-01-19
updated: 2026-01-19
author: woogi
---

## 1. 개요

WeDo 커플 투두 시스템의 인수 테스트 시나리오입니다. Given-When-Then 형식으로 작성되었습니다.

---

## 2. 인증 기능 테스트

### AC-001: 회원가입 성공

```gherkin
Feature: 사용자 회원가입
  사용자가 이메일과 비밀번호로 계정을 생성할 수 있다

  Scenario: 유효한 정보로 회원가입
    Given 사용자가 회원가입 화면에 있다
    And 이메일 "test@example.com"을 입력한다
    And 비밀번호 "Password123!"을 입력한다
    And 비밀번호 확인에 "Password123!"을 입력한다
    And 닉네임 "테스트유저"를 입력한다
    When 회원가입 버튼을 탭한다
    Then 계정이 성공적으로 생성된다
    And 커플 설정 화면으로 이동한다
```

### AC-002: 로그인 성공

```gherkin
Feature: 사용자 로그인
  등록된 사용자가 로그인할 수 있다

  Scenario: 유효한 자격 증명으로 로그인
    Given 등록된 사용자 "test@example.com"이 있다
    And 사용자가 로그인 화면에 있다
    And 이메일 "test@example.com"을 입력한다
    And 비밀번호 "Password123!"을 입력한다
    When 로그인 버튼을 탭한다
    Then 로그인에 성공한다
    And 적절한 화면으로 이동한다

  Scenario: 잘못된 비밀번호로 로그인 실패
    Given 등록된 사용자 "test@example.com"이 있다
    And 사용자가 로그인 화면에 있다
    And 이메일 "test@example.com"을 입력한다
    And 비밀번호 "WrongPassword"를 입력한다
    When 로그인 버튼을 탭한다
    Then 로그인에 실패한다
    And "비밀번호가 올바르지 않습니다" 에러 메시지가 표시된다
```

---

## 3. 커플 매칭 테스트

### AC-003: 초대 코드 생성

```gherkin
Feature: 커플 초대 코드 생성
  사용자가 파트너 초대를 위한 코드를 생성할 수 있다

  Scenario: 새 초대 코드 생성
    Given 로그인한 사용자가 커플 설정 화면에 있다
    And 아직 커플 매칭이 되지 않았다
    When "초대 코드 생성" 버튼을 탭한다
    Then 6자리 초대 코드가 생성된다
    And 초대 코드가 화면에 표시된다
    And 코드 복사 버튼이 표시된다
```

### AC-004: 초대 코드로 커플 매칭

```gherkin
Feature: 초대 코드 입력으로 커플 매칭
  사용자가 파트너의 초대 코드를 입력하여 매칭할 수 있다

  Scenario: 유효한 초대 코드로 매칭 성공
    Given 로그인한 사용자 A가 커플 설정 화면에 있다
    And 사용자 B가 초대 코드 "ABC123"을 생성했다
    And 사용자 A가 "초대 코드 입력" 탭을 선택한다
    And 초대 코드 "ABC123"을 입력한다
    When "매칭하기" 버튼을 탭한다
    Then 커플 매칭에 성공한다
    And 홈 화면으로 이동한다
    And 사용자 A와 B가 서로의 투두를 볼 수 있다

  Scenario: 유효하지 않은 초대 코드
    Given 로그인한 사용자가 커플 설정 화면에 있다
    And "초대 코드 입력" 탭을 선택한다
    And 초대 코드 "INVALID"를 입력한다
    When "매칭하기" 버튼을 탭한다
    Then 매칭에 실패한다
    And "유효하지 않은 초대 코드입니다" 에러 메시지가 표시된다
```

---

## 4. 투두 CRUD 테스트

### AC-005: 투두 생성

```gherkin
Feature: 투두 생성
  사용자가 새로운 투두를 생성할 수 있다

  Scenario: 기본 투두 생성
    Given 커플 매칭된 사용자가 홈 화면에 있다
    When 투두 추가 버튼(FAB)을 탭한다
    Then 투두 생성 화면이 열린다

    When 제목에 "장보기"를 입력한다
    And 카테고리에서 "쇼핑"을 선택한다
    And 날짜를 오늘로 설정한다
    And 저장 버튼을 탭한다
    Then 투두가 성공적으로 생성된다
    And 홈 화면의 투두 목록에 "장보기"가 표시된다
    And 파트너에게 "새로운 할 일" 알림이 전송된다

  Scenario: 필수 항목 누락 시 생성 실패
    Given 커플 매칭된 사용자가 투두 생성 화면에 있다
    And 제목을 비워둔다
    When 저장 버튼을 탭한다
    Then "제목을 입력해주세요" 에러 메시지가 표시된다
    And 투두가 생성되지 않는다
```

### AC-006: 투두 완료 처리

```gherkin
Feature: 투두 완료 처리
  사용자가 투두를 완료 처리할 수 있다

  Scenario: 투두 완료 토글
    Given 커플 매칭된 사용자가 홈 화면에 있다
    And 미완료 투두 "장보기"가 목록에 있다
    When "장보기" 투두의 체크박스를 탭한다
    Then 투두가 완료 상태로 변경된다
    And 체크박스에 체크 표시가 된다
    And 파트너에게 "할 일 완료" 알림이 전송된다

  Scenario: 완료된 투두 다시 미완료로
    Given 커플 매칭된 사용자가 홈 화면에 있다
    And 완료된 투두 "장보기"가 목록에 있다
    When "장보기" 투두의 체크박스를 탭한다
    Then 투두가 미완료 상태로 변경된다
    And 체크박스의 체크 표시가 해제된다
```

### AC-007: 투두 수정

```gherkin
Feature: 투두 수정
  사용자가 기존 투두를 수정할 수 있다

  Scenario: 투두 제목 수정
    Given 커플 매칭된 사용자가 홈 화면에 있다
    And 투두 "장보기"가 목록에 있다
    When "장보기" 투두를 탭한다
    Then 투두 상세 화면이 열린다

    When 수정 버튼을 탭한다
    And 제목을 "마트 장보기"로 변경한다
    And 저장 버튼을 탭한다
    Then 투두가 성공적으로 수정된다
    And 목록에 "마트 장보기"로 표시된다
    And 파트너에게 "할 일 수정" 알림이 전송된다
```

### AC-008: 투두 삭제

```gherkin
Feature: 투두 삭제
  사용자가 투두를 삭제할 수 있다

  Scenario: 투두 삭제 확인 후 삭제
    Given 커플 매칭된 사용자가 홈 화면에 있다
    And 투두 "장보기"가 목록에 있다
    When "장보기" 투두를 길게 탭한다
    And 삭제 옵션을 선택한다
    Then "정말 삭제하시겠습니까?" 확인 다이얼로그가 표시된다

    When 확인 버튼을 탭한다
    Then 투두가 삭제된다
    And 목록에서 "장보기"가 사라진다
    And 파트너에게 "할 일 삭제" 알림이 전송된다
```

---

## 5. 보기 모드 테스트

### AC-009: 일간 보기

```gherkin
Feature: 일간 보기 모드
  사용자가 특정 날짜의 투두만 볼 수 있다

  Scenario: 일간 보기로 전환
    Given 커플 매칭된 사용자가 홈 화면에 있다
    And 보기 모드가 월간 보기이다
    When 보기 모드 선택에서 "일간"을 탭한다
    Then 일간 보기 모드로 전환된다
    And 오늘 날짜의 투두만 표시된다

  Scenario: 다른 날짜 선택
    Given 사용자가 일간 보기 모드에 있다
    When 날짜 선택기를 탭한다
    And 내일 날짜를 선택한다
    Then 선택한 날짜의 투두 목록이 표시된다
```

### AC-010: 주간 보기

```gherkin
Feature: 주간 보기 모드
  사용자가 해당 주의 투두를 볼 수 있다

  Scenario: 주간 보기로 전환
    Given 커플 매칭된 사용자가 홈 화면에 있다
    When 보기 모드 선택에서 "주간"을 탭한다
    Then 주간 보기 모드로 전환된다
    And 이번 주 월요일부터 일요일까지의 투두가 표시된다
    And 요일별로 그룹화되어 표시된다
```

### AC-011: 월간 보기

```gherkin
Feature: 월간 보기 모드
  사용자가 캘린더 형태로 월간 투두를 볼 수 있다

  Scenario: 월간 보기로 전환
    Given 커플 매칭된 사용자가 홈 화면에 있다
    When 보기 모드 선택에서 "월간"을 탭한다
    Then 월간 보기 모드로 전환된다
    And 캘린더 형태로 이번 달이 표시된다
    And 투두가 있는 날짜에 표시가 된다

  Scenario: 캘린더에서 날짜 선택
    Given 사용자가 월간 보기 모드에 있다
    And 15일에 투두 "약속"이 있다
    When 캘린더에서 15일을 탭한다
    Then 15일의 투두 목록이 하단에 표시된다
    And "약속"이 목록에 보인다
```

---

## 6. 실시간 동기화 테스트

### AC-012: 파트너 투두 실시간 표시

```gherkin
Feature: 실시간 동기화
  파트너가 생성한 투두가 실시간으로 표시된다

  Scenario: 파트너 투두 실시간 반영
    Given 사용자 A와 B가 커플 매칭되어 있다
    And 사용자 A가 홈 화면에 있다
    When 사용자 B가 다른 기기에서 "저녁 준비" 투두를 생성한다
    Then 사용자 A의 화면에 "저녁 준비" 투두가 자동으로 표시된다
    And 새로고침 없이 즉시 반영된다
```

---

## 7. 푸시 알림 테스트

### AC-013: 투두 생성 알림

```gherkin
Feature: 투두 생성 푸시 알림
  파트너가 투두를 생성하면 알림을 받는다

  Scenario: 앱이 백그라운드일 때 알림 수신
    Given 사용자 A와 B가 커플 매칭되어 있다
    And 사용자 A의 앱이 백그라운드 상태이다
    And 알림 권한이 허용되어 있다
    When 사용자 B가 "장보기" 투두를 생성한다
    Then 사용자 A의 기기에 푸시 알림이 표시된다
    And 알림 제목은 "새로운 할 일"이다
    And 알림 내용은 "{B닉네임}님이 '장보기'을 추가했어요"이다
```

### AC-014: 알림 설정

```gherkin
Feature: 알림 설정
  사용자가 알림을 설정할 수 있다

  Scenario: 알림 끄기
    Given 사용자가 설정 화면에 있다
    And 알림이 켜져 있다
    When 알림 토글을 탭한다
    Then 알림이 꺼진다
    And 파트너의 투두 변경 시 알림을 받지 않는다
```

---

## 8. 오프라인 지원 테스트

### AC-015: 오프라인에서 투두 조회

```gherkin
Feature: 오프라인 투두 조회
  오프라인 상태에서도 투두를 볼 수 있다

  Scenario: 네트워크 연결 없이 투두 조회
    Given 사용자가 이전에 앱을 사용하여 데이터가 캐시되어 있다
    And 현재 네트워크 연결이 없다
    When 앱을 실행한다
    Then 캐시된 투두 목록이 표시된다
    And 오프라인 상태 표시가 나타난다
```

### AC-016: 오프라인에서 투두 생성 후 동기화

```gherkin
Feature: 오프라인 투두 생성 및 동기화
  오프라인에서 생성한 투두가 온라인 시 동기화된다

  Scenario: 오프라인 생성 후 온라인 동기화
    Given 사용자가 오프라인 상태이다
    When "청소하기" 투두를 생성한다
    Then 투두가 로컬에 저장된다
    And 목록에 "청소하기"가 표시된다
    And 동기화 대기 표시가 나타난다

    When 네트워크 연결이 복구된다
    Then 투두가 서버에 자동 동기화된다
    And 동기화 대기 표시가 사라진다
    And 파트너에게 알림이 전송된다
```

---

## 9. 보안 테스트

### AC-017: 비인증 사용자 접근 차단

```gherkin
Feature: 비인증 접근 차단
  로그인하지 않은 사용자는 데이터에 접근할 수 없다

  Scenario: 비로그인 상태에서 홈 화면 접근 시도
    Given 사용자가 로그인하지 않았다
    When 앱을 실행한다
    Then 로그인 화면으로 이동한다
    And 홈 화면에 접근할 수 없다
```

### AC-018: 다른 커플 데이터 접근 차단

```gherkin
Feature: 데이터 격리
  다른 커플의 데이터에 접근할 수 없다

  Scenario: 다른 커플 데이터 접근 시도
    Given 커플 A-B와 커플 C-D가 있다
    And 사용자 A가 로그인되어 있다
    When Firestore 보안 규칙이 적용된 상태에서
    And 커플 C-D의 투두에 접근을 시도한다
    Then 접근이 거부된다
    And 에러가 발생한다
```

---

## 10. 성능 테스트

### AC-019: 앱 시작 시간

```gherkin
Feature: 앱 시작 성능
  앱이 빠르게 시작되어야 한다

  Scenario: 콜드 스타트 시간 측정
    Given 앱이 완전히 종료된 상태이다
    When 앱 아이콘을 탭한다
    Then 3초 이내에 첫 화면이 표시된다
```

### AC-020: 투두 목록 로딩 시간

```gherkin
Feature: 투두 목록 로딩 성능
  투두 목록이 빠르게 로딩되어야 한다

  Scenario: 100개 투두 로딩 시간
    Given 커플에 100개의 투두가 있다
    And 사용자가 로그인되어 있다
    When 홈 화면으로 이동한다
    Then 1초 이내에 투두 목록이 표시된다
```

---

## 11. 엣지 케이스 테스트

### AC-021: 빈 투두 목록

```gherkin
Feature: 빈 상태 처리
  투두가 없을 때 적절한 안내를 표시한다

  Scenario: 투두가 없는 상태
    Given 커플 매칭된 사용자가 홈 화면에 있다
    And 투두가 하나도 없다
    Then "아직 할 일이 없어요" 메시지가 표시된다
    And "첫 번째 할 일을 추가해보세요" 안내가 표시된다
    And 투두 추가 버튼이 눈에 띄게 표시된다
```

### AC-022: 긴 제목 처리

```gherkin
Feature: 긴 텍스트 처리
  긴 투두 제목이 적절히 처리된다

  Scenario: 100자 이상의 제목
    Given 사용자가 투두 생성 화면에 있다
    When 100자 이상의 긴 제목을 입력한다
    Then 최대 글자 수 제한이 적용된다
    Or 목록에서 말줄임표(...)로 표시된다
```

### AC-023: 동시 수정 충돌

```gherkin
Feature: 동시 수정 충돌 처리
  두 사용자가 동시에 같은 투두를 수정할 때 처리

  Scenario: 동시 수정 시 최신 데이터 우선
    Given 사용자 A와 B가 같은 투두 "장보기"를 보고 있다
    When 사용자 A가 제목을 "마트 장보기"로 수정한다
    And 사용자 B가 거의 동시에 제목을 "슈퍼 장보기"로 수정한다
    Then 더 나중에 저장된 수정이 적용된다
    And 두 사용자 모두 동일한 최종 결과를 본다
```

---

## 12. 선택적 기능 테스트 (Optional)

### AC-024: 다크 모드 (Optional)

```gherkin
Feature: 다크 모드
  사용자가 다크 모드를 사용할 수 있다

  Scenario: 다크 모드 전환
    Given 사용자가 설정 화면에 있다
    And 현재 라이트 모드이다
    When 테마 설정에서 "다크 모드"를 선택한다
    Then 앱 전체가 다크 테마로 변경된다
    And 설정이 저장되어 다음 실행 시에도 유지된다
```

### AC-025: 투두 반복 설정 (Optional)

```gherkin
Feature: 투두 반복
  투두에 반복 설정을 할 수 있다

  Scenario: 매일 반복 투두 생성
    Given 사용자가 투두 생성 화면에 있다
    When 제목에 "비타민 먹기"를 입력한다
    And 반복 설정에서 "매일"을 선택한다
    And 저장 버튼을 탭한다
    Then 반복 투두가 생성된다
    And 매일 자동으로 새 투두가 생성된다
```

---

## 13. Quality Gate 기준

### 테스트 커버리지

| 항목 | 기준 |
|------|------|
| Unit Test 커버리지 | >= 70% |
| Widget Test 커버리지 | >= 50% |
| Integration Test | 핵심 시나리오 100% |

### 합격 기준

- [ ] 모든 HIGH 우선순위 시나리오 통과
- [ ] MEDIUM 우선순위 시나리오 90% 이상 통과
- [ ] 크리티컬 버그 0건
- [ ] 메이저 버그 3건 이하
- [ ] 성능 기준 충족 (시작 < 3초, 로딩 < 1초)

### Definition of Done

- [ ] 모든 인수 테스트 시나리오 통과
- [ ] 코드 리뷰 완료
- [ ] Dart Analysis 경고 0건
- [ ] APK 빌드 성공
- [ ] 실기기 테스트 완료 (Android)

---

## 14. 추적성

### 관련 문서

| 문서 | 경로 |
|------|------|
| SPEC 문서 | `.moai/specs/SPEC-TODO-001/spec.md` |
| 구현 계획 | `.moai/specs/SPEC-TODO-001/plan.md` |

### 요구사항-테스트 매핑

| 요구사항 ID | 테스트 시나리오 |
|-------------|-----------------|
| U-001 | AC-017 |
| U-002 | AC-012 |
| U-003 | AC-015, AC-016 |
| E-001 ~ E-004 | AC-005 ~ AC-008, AC-013 |
| E-005 | AC-003, AC-004 |
| E-007 | AC-016 |
| S-001 | AC-012 |
| S-002 | AC-015 |
| S-003 ~ S-005 | AC-009 ~ AC-011 |
| N-001 | AC-017 |
| N-002 | AC-018 |
| O-001 | AC-024 |
| O-002 | AC-025 |

---

**문서 끝**
